name: 'Run Elementary'
author: 'Elementary Data'
description: 'Monitor your dbt project and be the first to know of data issues.'

inputs:
  warehouse-type:
    description: 'The type of your warehouse (snowflake, bigquery, redshift, etc)'
    required: true
  profiles-yml:
    description: |
      Dbt's `profiles.yml` with the `elementary` profile.
      Can be generated by running `dbt run-operation elementary.generate_elementary_cli_profile` within your project.
    required: true
  elementary-conf-yml:
    description: "Elementary's configuration file (`~/.edr/config.yml`)."
    required: true
  monitor:
    description: "Should run `edr monitor`"
    default: true
  send-report:
    description: 'Should run `edr send-report`'
    default: false

runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.warehouse-type }}
    - ${{ inputs.profiles-yml }}
    - ${{ inputs.elementary-conf-yml }}
    - ${{ inputs.monitor }}
    - ${{ inputs.send-report }}
